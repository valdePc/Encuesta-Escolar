<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Encuesta para Estudiantes</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f4f6f8;
      color: #2c3e50;
    }
    .container {
      max-width: 850px;
      margin: 40px auto;
      padding: 30px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #1a5276;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #f9f9f9;
      font-size: 15px;
    }
    textarea { resize: vertical; }
    button {
      margin-top: 30px;
      padding: 12px 20px;
      background-color: #1a5276;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
        button {
      margin-top: 15px;
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    button.back {
      background-color: #ccc;
      color: #2c3e50;
    }
    button.back:hover {
      background-color: #bbb;
    }
    button.submit {
      background-color: #1a5276;
      color: white;
    }
    button.submit:hover {
      background-color: #154360;
    }
    button:hover { background-color: #154360; }
    #yaCompletado { display: none; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Encuesta para Estudiantes</h2>
    <form id="encuestaForm">
<!-- Botón para regresar -->
      <button type="button" class="back" onclick="history.back()">Regresar</button>
     <label>Grado escolar:</label>
<select name="Grado" required>
  <option value="">Seleccione un grado</option>
 
  <optgroup label="Nivel Primario">
    <option>1ro de Primaria</option>
    <option>2do de Primaria</option>
    <option>3ro de Primaria</option>
    <option>4to de Primaria</option>
    <option>5to de Primaria</option>
    <option>6to de Primaria</option>
  </optgroup>
  <optgroup label="Nivel Secundario (1er Ciclo)">
    <option>1ro de Secundaria</option>
    <option>2do de Secundaria</option>
  </optgroup>
  <optgroup label="Nivel Secundario (2do Ciclo)">
    <option>3ro de Secundaria (Antiguo 1ro Bachillerato)</option>
    <option>4to de Secundaria (Antiguo 2do Bachillerato)</option>
    <option>5to de Secundaria (Antiguo 3ro Bachillerato)</option>
    <option>6to de Secundaria (Antiguo 4to Bachillerato)</option>
  </optgroup>
</select>


      <label>Edad:</label>
      <input type="number" name="Edad" min="5" max="100" />

      <label>¿Con qué frecuencia enfrenta dificultades al usar herramientas tecnológicas en sus estudios?</label>
      <select name="Dificultades">
        <option value="">Seleccione una opción</option>
        <option>Nunca</option>
        <option>Rara vez</option>
        <option>Ocasionalmente</option>
        <option>Frecuentemente</option>
        <option>Todos los días</option>
      </select>

      <label>¿Qué herramientas tecnológicas utiliza para sus tareas y clases?</label>
      <textarea name="Herramientas" rows="2"></textarea>

      <label>¿Considera efectiva la comunicación con sus profesores?</label>
      <select name="ComunicacionProfesores">
        <option value="">Seleccione una opción</option>
        <option>Sí</option>
        <option>No</option>
        <option>A veces</option>
      </select>

      <label>Comentarios sobre la comunicación con sus profesores:</label>
      <textarea name="ComentariosComunicacion" rows="2"></textarea>

      <label>¿Tiene claridad sobre las fechas de entregas y evaluaciones?</label>
      <select name="ClaridadFechas">
        <option value="">Seleccione una opción</option>
        <option>Siempre</option>
        <option>A veces</option>
        <option>Rara vez</option>
        <option>Nunca</option>
      </select>

      <label>¿Cómo evalúa la organización del calendario académico?</label>
      <select name="EvaluacionCalendario">
        <option value="">Seleccione una opción</option>
        <option>Excelente</option>
        <option>Buena</option>
        <option>Regular</option>
        <option>Deficiente</option>
      </select>

      <label>Observaciones sobre la organización académica:</label>
      <textarea name="ObservacionesCalendario" rows="2"></textarea>

      <label>¿Qué mejoras tecnológicas considera necesarias para su plataforma de aprendizaje?</label>
      <textarea name="Mejoras" rows="3"></textarea>

      <label>¿Le gustaría recibir capacitación adicional? Indique las áreas de interés.</label>
      <textarea name="Capacitacion" rows="2"></textarea>

      <label>¿Qué sugerencias tiene para mejorar su experiencia de aprendizaje?</label>
      <textarea name="Sugerencias" rows="3"></textarea>

      <label>
        En caso de desarrollarse una plataforma que se adapte a tus nececidades escolares, estatarias dispuesto a utilizarla?
      </label>
      <select name="DisposicionPlataforma">
        <option value="">Seleccione una opción</option>
        <option>Sí, totalmente dispuesto/a</option>
        <option>Tal vez, si es fácil de usar</option>
        <option>No lo sé aún</option>
        <option>No estaría interesado/a</option>
      </select>

      <button type="submit">Enviar respuestas</button>
    </form>

    <div id="yaCompletado">
      <h2>¡Gracias por participar!</h2>
      <p>Sus respuestas han sido registradas exitosamente.</p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const formulario = document.getElementById("encuestaForm");
      const yaCompletado = document.getElementById("yaCompletado");

      formulario.addEventListener("submit", async function(e) {
        e.preventDefault();
        const data = {};
        for (let el of formulario.elements) {
          if (el.name) data[el.name] = el.value;
        }

        try {
          const response = await fetch(
            "https://api.airtable.com/v0/appADkJGRawXcjNis/estudiantes",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer patahEcqj3LsA9EtD.43ee32266f8b37c149d0a162bf4582bd0a72f50465c888157c83b20993fc2fe7"
              },
              body: JSON.stringify({
                fields: {
                  grado: data.Grado,
                  edad: data.Edad,
                  actividades_principales: data.Actividades,
                  dificultades_tecnologicas: data.Dificultades,
                  herramientas_digitales: data.Herramientas,
                  comunicacion_profesores: data.ComunicacionProfesores,
                  comentarios_comunicacion: data.ComentariosComunicacion,
                  claridad_fechas: data.ClaridadFechas,
                  evaluacion_calendario: data.EvaluacionCalendario,
                  observaciones_calendario: data.ObservacionesCalendario,
                  mejoras_tecnologicas: data.Mejoras,
                  capacitacion_interes: data.Capacitacion,
                  sugerencias: data.Sugerencias,
                  disposicion_plataforma: data.DisposicionPlataforma,
                  fecha_envio: new Date().toISOString()
                }
              })
            }
          );

          const result = await response.json();
          if (res.ok) {
  localStorage.setItem('encuestaCompletada', 'true');
  formulario.style.display = "none";
  document.getElementById("btnRegresar").style.display = "none";
  yaCompletado.style.display = "block";
          } else {
            alert("Error: " + (result.error?.message || "Desconocido"));
          }
        } catch {
          alert("No se pudo conectar con el servidor.");
        }
      });
    });
  </script>
</body>
</html>
